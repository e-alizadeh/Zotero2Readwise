# Example workflow for automating Zotero to Readwise sync
# Copy this file to your own repository and configure the secrets
#
# Required secrets:
#   - READWISE_TOKEN: Your Readwise access token (https://readwise.io/access_token)
#   - ZOTERO_KEY: Your Zotero API key (https://www.zotero.org/settings/keys)
#   - ZOTERO_LIBRARY_ID: Your Zotero user/library ID (https://www.zotero.org/settings/keys)
#
# Optional secrets:
#   - ZOTERO_LIBRARY_TYPE: 'user' (default) or 'group' for shared libraries

name: Zotero to Readwise Sync

on:
  schedule:
    - cron: "0 3 * * 1"  # Runs at 03:00 AM UTC every Monday
  workflow_dispatch:  # Allow manual trigger

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Install uv
        uses: astral-sh/setup-uv@v4

      - name: Sync Zotero to Readwise
        env:
          READWISE_TOKEN: ${{ secrets.READWISE_TOKEN }}
          ZOTERO_KEY: ${{ secrets.ZOTERO_KEY }}
          ZOTERO_LIBRARY_ID: ${{ secrets.ZOTERO_LIBRARY_ID }}
          # ZOTERO_LIBRARY_TYPE: user  # Uncomment and change to 'group' for shared libraries
        run: uvx zotero2readwise
